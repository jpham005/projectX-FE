<!DOCTYPE html>
<html lang="en-US">
  <head>
    <title>Jaham's SignUp Practice</title>
    <link rel="icon" href="http://localhost/favicon.ico">
    <link rel="stylesheet" href="index.css">
    <base href="http://localhost">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="author" content="Jaham">
    <meta name="description" contexnt="Jaham's projectX subject">
    <meta name="keywords" content="Jaham,jaham,42,projectx,projectX,project-X,SignUp">
  </head>
  <body>
    <nav class="mainMenuContainer">
      <a href="#title">Title</a>
      <a href="#intro">Introduction</a>
      <a href="#signup">SignUp</a>
    </nav>
    <header>
      <h1 id="title">Jaham's SignUp Practice</h1>
    </header>
    <div class="contentContainer">
      <main class="mainTextContainer">
        <p id="intro">
          This application provides you to practice signing up with simple example.<br/>
          Try to be a pro-signner!
        </p>
        <form id="signup">
          <div>
            <label>
              Name:
              <input id="userName" type="text" required />
            </label>
          </div>
          <div>
            <label>
              Id:
              <input id="userId" type="text" required autocomplete="username" />
            </label>
          </div>
          <div>
            <label>
              Password:
              <input
                id="userPassword"
                type="password"
                required
                minlength="8"
                maxlength="20"
                title="Format: 8-20 long, Containes at least one Lowercase, one Uppercase and"
                autocomplete="current-password"
              />
              <div>
                <small>
                  Format: 8-20 long, Containes at least one Lowercase, one Uppercase and
                  one Digit
                </small>
              </div>
            </label>
          </div>
          <div>
            <label>
              Phone:
              <input
                id="userPhone"
                type="tel"
                required
                placeholder="010-1234-5678"
                title="Format: Numbers which is seperated by `-'"
              />
              <div>
                <small>Format: Numbers which is seperated by `-'</small>
              </div>
          </div>
          </label>
          <div>
            <label>
              Email:
              <input
                id="userEmail"
                type="email"
                required
                placeholder="example@ex.com"
                title="Format: Your email with both `@' and `.'"
                autocomplete="email"
              />
              <div>
                <small>Format: Your email with both `@' and `.'</small>
              </div>
          </div>
          </label>
          <div>
            <button id="submitButton">Submit</button>
            <script>
              class UserInput {
                userName;
                userId;
                userPassword;
                userPhone;
                userEmail;
                constructor() {
                  this.userName = null
                  this.userId = null
                  this.userPassword = null
                  this.userPhone = null
                  this.userEmail = null
                }

                setInput(userName, userId, userPassword, userPhone, userEmail) {
                  this.userName = userName;
                  this.userId = userId;
                  this.userPassword = userPassword;
                  this.userPhone = userPhone;
                  this.userEmail = userEmail;
                }
              };
              
              class EventHandler extends UserInput {
                history;
                constructor() {
                  super();
                  this.history = [];
                }

                setInput(userName, userId, userPassword, userPhone, userEmail) {
                  this.history.push({
                    userName,
                    userId,
                  });

                  if (this.history.length > 5) {
                    this.history.splice(0, this.history.length - 5);
                  }

                  super.setInput(userName, userId, userPassword, userPhone, userEmail);
                }

                logInput() {
                  if (this.userName && this.userId && this.userPassword && this.userPhone && this.userEmail)
                    console.log(`userName: ${this.userName}\nuserId: ${this.userId}\nuserPassword: ${this.userPassword}\nuserPhone: ${this.userPhone}\nuserEmail: ${this.userEmail}`);
                }
                
                alertInput() {
                  if (this.userName && this.userId && this.userPassword && this.userPhone && this.userEmail)
                    alert(`userName: ${this.userName}\nuserId: ${this.userId}\nuserPassword: ${this.userPassword}\nuserPhone: ${this.userPhone}\nuserEmail: ${this.userEmail}`);
                }

                clearInput() {
                  super.setInput(null, null, null, null, null);
                }

                showHistory = function () {
                  this.history.forEach((curr, index) => console.debug(`index: ${index} username: ${curr.userName}, userId: ${curr.userId}`));
                }
              };

              const eventHandler = new EventHandler();
              
              const handleSubmitClick = (e) => {
                e.preventDefault();
                const userName = document.querySelector("#userName");
                const userId = document.querySelector("#userId");
                const userPassword = document.querySelector("#userPassword");
                const userPhone = document.querySelector("#userPhone");
                const userEmail = document.querySelector("#userEmail");
                
                eventHandler.setInput(userName.value, userId.value, userPassword.value, userPhone.value, userEmail.value);
                eventHandler.logInput();
                eventHandler.alertInput();
                eventHandler.clearInput();
                (function example () { eventHandler.showHistory(); }());

                userName.value = '';
                userId.value = '';
                userPassword.value = '';
                userPhone.value = '';
                userEmail.value = '';
              }

              const inputForm = document.querySelector("#signup");
              inputForm.addEventListener("submit", handleSubmitClick);
            </script>
          </div>
        </form>
      </main>
      <aside class="sideMenuContainer">
        <div>
          More Challenges!
        </div>
        <div class="sideMenu">
          <a class="sideMenuLink" href="https://www.google.com">google</a>
          <a class="sideMenuLink" href="https://www.naver.com">naver</a>
          <a class="sideMenuLink" href="https://intra.42.fr">42</a>
        </div>
      </aside>
    </div>
    <footer class="footerContainer">
      <small>Copyright 2022. Jaham All rights reserved.</small>
    </footer>
  </body>
</html>
